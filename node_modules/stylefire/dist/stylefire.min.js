!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.stylefire={})}(this,function(t){"use strict";var e=function(){return(e=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},r=0,n="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(t){return window.requestAnimationFrame(t)}:function(t){var e=Date.now(),n=Math.max(0,16.7-(e-r));r=e+n,setTimeout(function(){return t(r)},n)};function o(t){var e=[],r=[],n=0,o=!1,a=0;return{cancel:function(t){var e=r.indexOf(t);-1!==e&&r.splice(e,1)},process:function(){for(o=!0,e=(t=[r,e])[0],(r=t[1]).length=0,n=e.length,a=0;a<n;a++)e[a]();var t;o=!1},schedule:function(a,i){void 0===i&&(i=!1),t();var s=i&&o,u=s?e:r;-1===u.indexOf(a)&&(u.push(a),s&&(n=e.length))}}}"undefined"!=typeof performance&&performance.now;var a=!1;function i(){a||(a=!0,n(l))}var s=o(i),u=o(i),f=o(i),c=o(i);function l(t){a=!1,s.process(),u.process(),f.process(),c.process()}var p,d=f.schedule,h=function(t){var e=t.onRead,r=t.onRender,n=t.aliasMap,o=void 0===n?{}:n,a=t.useCache,i=void 0===a||a;return function(t){var n={},a=[],s=!1,u=function(t,e){var r=o[t]||t,i=n[r];n[r]=e,n[r]!==i&&(-1===a.indexOf(r)&&a.push(r),s||(s=!0,d(f)))};function f(e){return void 0===e&&(e=!1),(e||s)&&(r(n,t,a),s=!1,a.length=0),this}return{get:function(r){var a=o[r]||r;return a?i&&void 0!==n[a]?n[a]:e(a,t):n},set:function(t,e){if("string"==typeof t){if(void 0===e)return function(e){return u(t,e)};u(t,e)}else for(var r in t)t.hasOwnProperty(r)&&u(r,t[r]);return this},render:f}}},g=/([a-z])([A-Z])/g,v=function(t){return t.replace(g,"$1-$2").toLowerCase()},m=new Map,y=new Map,w=["Webkit","Moz","O","ms",""],b=w.length,O=function(t,e){void 0===e&&(e=!1);var r=e?y:m;return r.has(t)||function(t){if("undefined"!=typeof document){p=p||document.createElement("div");for(var e=0;e<b;e++){var r=w[e],n=""===r,o=n?t:r+t.charAt(0).toUpperCase()+t.slice(1);o in p.style&&(m.set(t,o),y.set(t,(n?"":"-")+v(o)))}}}(t),r.get(t)||t},x=["","X","Y","Z"],Y=["translate","scale","rotate","skew","transformPerspective"].reduce(function(t,e){return x.reduce(function(t,r){return t.push(e+r),t},t)},["x","y","z"]),k=Y.reduce(function(t,e){return t[e]=!0,t},{}),X=function(t){return!0===k[t]},L=function(t,e){return Y.indexOf(t)-Y.indexOf(e)},M=function(t){return"transformOriginX"===t||"transformOriginY"===t},C=function(){return(C=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},T=function(t,e){return function(r){return Math.max(Math.min(r,e),t)}},P=function(t){return function(e){return"string"==typeof e&&0===e.indexOf(t)}},Z=function(t){return t%1?Number(t.toFixed(5)):t},R={test:function(t){return"number"==typeof t},parse:parseFloat,transform:function(t){return t}},S=C({},R,{transform:T(0,1)}),j=C({},R,{default:1}),A=function(t){var e,r=(e=t,function(t){return"string"==typeof t&&-1!==t.indexOf(e)});return{test:function(t){return"string"==typeof t&&r(t)&&1===t.split(" ").length},parse:parseFloat,transform:function(e){return""+e+t}}},E=A("deg"),F=A("%"),H=A("px"),N=T(0,255),V=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))$/i,z=function(t){return void 0!==t.red},I=function(t){return void 0!==t.hue},q=function(t){var e=t.length;return function(r){if("string"!=typeof r)return r;for(var n,o={},a=function(t){return"string"==typeof t?t.split(/,\s*/):[t]}((n=r).substring(n.indexOf("(")+1,n.lastIndexOf(")"))),i=0;i<e;i++)o[t[i]]=void 0!==a[i]?parseFloat(a[i]):1;return o}},B=C({},R,{transform:function(t){return Math.round(N(t))}}),W=P("rgb"),$={test:function(t){return"string"==typeof t?W(t):z(t)},parse:q(["red","green","blue","alpha"]),transform:function(t){var e=t.red,r=t.green,n=t.blue,o=t.alpha;return function(t){var e=t.red,r=t.green,n=t.blue,o=t.alpha;return"rgba("+e+", "+r+", "+n+", "+(void 0===o?1:o)+")"}({red:B.transform(e),green:B.transform(r),blue:B.transform(n),alpha:Z(o)})}},_=P("hsl"),D={test:function(t){return"string"==typeof t?_(t):I(t)},parse:q(["hue","saturation","lightness","alpha"]),transform:function(t){var e=t.hue,r=t.saturation,n=t.lightness,o=t.alpha;return function(t){var e=t.hue,r=t.saturation,n=t.lightness,o=t.alpha;return"hsla("+e+", "+r+", "+n+", "+(void 0===o?1:o)+")"}({hue:Math.round(e),saturation:F.transform(Z(r)),lightness:F.transform(Z(n)),alpha:Z(o)})}},G=C({},$,{test:P("#"),parse:function(t){var e="",r="",n="";return t.length>4?(e=t.substr(1,2),r=t.substr(3,2),n=t.substr(5,2)):(e=t.substr(1,1),r=t.substr(2,1),n=t.substr(3,1),e+=e,r+=r,n+=n),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:1}}}),U={test:function(t){return"string"==typeof t&&V.test(t)||$.test(t)||D.test(t)||G.test(t)},parse:function(t){return $.test(t)?$.parse(t):D.test(t)?D.parse(t):G.test(t)?G.parse(t):t},transform:function(t){return z(t)?$.transform(t):I(t)?D.transform(t):t}},J={color:U,backgroundColor:U,outlineColor:U,fill:U,stroke:U,borderColor:U,borderTopColor:U,borderRightColor:U,borderBottomColor:U,borderLeftColor:U,borderRadius:H,width:H,maxWidth:H,height:H,maxHeight:H,top:H,left:H,bottom:H,right:H,rotate:E,rotateX:E,rotateY:E,rotateZ:E,scale:j,scaleX:j,scaleY:j,scaleZ:j,skewX:E,skewY:E,distance:H,translateX:H,translateY:H,translateZ:H,perspective:H,opacity:S,transformOriginX:F,transformOriginY:F,transformOriginZ:H},K=function(t){return J[t]},Q="number",tt="object",et="transform-origin",rt="transform",nt="translateZ",ot=";transform: none",at=function(t,e){return";"+t+":"+e};function it(t,e,r,n){void 0===e&&(e=!0),void 0===r&&(r=!0);for(var o=!0===e?Object.keys(t):e,a="",i="",s=!1,u=!0,f=!1,c=!1,l=o.length,p=0;p<l;p++){var d=o[p];if(X(d)){for(var h in f=!0,t)X(h)&&-1===o.indexOf(h)&&o.push(h);break}}o.sort(L);var g=o.length;for(p=0;p<g;p++){d=o[p];if(!n.has(d)){var v=X(d),m=t[d],y=K(d);v&&(y.default&&m!==y.default||!y.default&&0!==m)&&(u=!1),y&&(typeof m===Q||typeof m===tt)&&y.transform&&(m=y.transform(m)),v?(i+=d+"("+m+") ",c=d===nt||c):M(d)?(t[d]=m,s=!0):a+=at(O(d,!0),m)}}return s&&(a+=at(et,(t.transformOriginX||0)+" "+(t.transformOriginY||0)+" "+(t.transformOriginZ||0))),f&&(!c&&r&&(i+=nt+"(0)"),a+=at(rt,u?ot:i)),a}var st=new Set(["scrollLeft","scrollTop"]),ut=h({onRead:function(t,e){var r=e.element,n=e.preparseOutput,o=K(t);if(X(t))return o&&o.default||0;if(st.has(t))return r[t];var a=window.getComputedStyle(r,null).getPropertyValue(O(t,!0))||0;return n&&o&&o.parse?o.parse(a):a},onRender:function(t,e,r){var n=e.element,o=e.enableHardwareAcceleration;n.style.cssText+=it(t,r,o,st),-1!==r.indexOf("scrollLeft")&&(n.scrollLeft=t.scrollLeft),-1!==r.indexOf("scrollTop")&&(n.scrollTop=t.scrollTop)},aliasMap:{x:"translateX",y:"translateY",z:"translateZ",originX:"transformOriginX",originY:"transformOriginY",originZ:"transformOriginZ"},uncachedValues:st}),ft=function(t,e){return t/100*e+"px"},ct={fill:U,stroke:U,scale:j,scaleX:j,scaleY:j,opacity:S,fillOpacity:S,strokeOpacity:S},lt=h({onRead:function(t,e){var r=e.element;if(X(t)){var n=function(t){return ct[t]}(t);return n?n.default:0}return r.getAttribute(t)},onRender:function(t,e,r){var n=e.dimensions;!function(t,e){for(var r in e)e.hasOwnProperty(r)&&t.setAttribute(r,e[r])}(e.element,function(t,e,r,n){var o=!1,a=!1,i={},s=r?{pathLength:"0",pathSpacing:""+n}:void 0,u=void 0!==t.scale?t.scale||1e-7:t.scaleX||1,f=void 0!==t.scaleY?t.scaleY||1e-7:u||1,c=e.width*((t.originX||50)/100)+e.x,l=e.height*((t.originY||50)/100)+e.y,p=1*u*-c,d=1*f*-l,h=c/u,g=l/f,m={translate:"translate("+t.translateX+", "+t.translateY+") ",scale:"translate("+p+", "+d+") scale("+u+", "+f+") translate("+h+", "+g+") ",rotate:"rotate("+t.rotate+", "+c+", "+l+") ",skewX:"skewX("+t.skewX+") ",skewY:"skewY("+t.skewY+") "};for(var y in t)if(t.hasOwnProperty(y)){var w=t[y];X(y)?o=!0:!r||"pathLength"!==y&&"pathSpacing"!==y||"number"!=typeof w?r&&"pathOffset"===y?i["stroke-dashoffset"]=ft(-w,n):i[v(y)]=w:(a=!0,s[y]=ft(w,n))}if(a&&(i["stroke-dasharray"]=s.pathLength+" "+s.pathSpacing),o)for(var y in i.transform="",m)if(m.hasOwnProperty(y)){var b="scale"===y?"1":"0";i.transform+=m[y].replace(/undefined/g,b)}return i}(t,n,e.isPath,e.pathLength))},aliasMap:{x:"translateX",y:"translateY",background:"fill"}}),pt=h({useCache:!1,onRead:function(t){return"scrollTop"===t?window.pageYOffset:window.pageXOffset},onRender:function(t){var e=t.scrollTop,r=void 0===e?0:e,n=t.scrollLeft,o=void 0===n?0:n;return window.scrollTo(o,r)}}),dt=function(){};"production"!==process.env.NODE_ENV&&(dt=function(t,e){if(!t)throw new Error("Hey, listen! ".toUpperCase()+e)});var ht=new WeakMap,gt=function(t,r){var n;return t instanceof HTMLElement?n=function(t,r){return ut(e({element:t,enableHardwareAcceleration:!0,preparseOutput:!0},r))}(t,r):t instanceof SVGElement?n=function(t){var e=t.getBBox(),r={element:t,dimensions:{x:e.x,y:e.y,width:e.width,height:e.height},isPath:!1};return"path"===t.tagName&&(r.isPath=!0,r.pathLength=t.getTotalLength()),lt(r)}(t):"undefined"!=typeof window&&t===window&&(n=pt(t)),dt(void 0!==n,"No valid node provided. Node must be HTMLElement, SVGElement or window."),ht.set(t,n),n},vt=function(t,e){return ht.has(t)?ht.get(t):gt(t,e)};t.default=function(t,e){var r="string"==typeof t?document.querySelector(t):t;return vt(r,e)},t.createStylerFactory=h,t.buildStyles=it,Object.defineProperty(t,"__esModule",{value:!0})});
